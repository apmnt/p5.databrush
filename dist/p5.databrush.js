!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).databrush={})}(this,(function(t){"use strict";const e=1e3,n=460,i=460,s=["#2c695a","#4ad6af","#7facc6","#4e93cc","#f6684f","#ffd300"],a={loaded:!1,prop(){return this.height/this.width},isLandscape(){return window.innerHeight<=window.innerWidth*this.prop()},resize(){this.isLandscape()?(console.log("yes"),document.getElementById(this.css).style.height="100%",document.getElementById(this.css).style.removeProperty("width")):(document.getElementById(this.css).style.removeProperty("height"),document.getElementById(this.css).style.width="100%")},setSize(t,e,n,i){this.width=t,this.height=e,this.pD=n,this.css=i},createCanvas(){this.main=createCanvas(e,e,WEBGL),pixelDensity(this.pD),this.main.id(this.css),this.resize()}};function o(t,e,n,i,s){textAlign(CENTER,CENTER),textSize(12),brush.line(0,0,i,0),brush.line(0,s,i,s);const a=Math.round((e-t)/n);for(let o=1;o<a;o++){const a=t+o*n,r=(a-t)/(e-t)*i;text(a.toFixed(1),r,s+10),brush.line(r,0,r,s)}}function r(t,e,n,i,s){textAlign(RIGHT,CENTER),textSize(12),brush.line(0,0,0,s),brush.line(i,0,i,s);const a=Math.round((e-t)/n);for(let o=1;o<a;o++){const a=t+o*n,r=s-(a-t)/(e-t)*s;text(a.toFixed(1),-10,r),brush.line(0,r,i,r)}}function c(t,e){const n=e-t,i=Math.pow(10,Math.floor(Math.log10(n))),s=n/i;let a;a=s<1.5?.1:s<3?.2:s<7?.5:1,a*=i;return{min:Math.floor(t/a)*a,max:Math.ceil(e/a)*a,tick:a}}a.setSize(e,e,1,"mainCanvas"),t.commonSetup=function(){a.createCanvas(),angleMode(DEGREES),background("#fffceb"),fill("gray"),textFont(undefined),textSize(36),text("*p5.databrush",-200,-10),textSize(12),translate(-400,-400)},t.drawGrid=function(t){const{niceMinX:e,niceMaxX:s,niceTickX:a,niceMinY:h,niceMaxY:l,niceTickY:d}=function(t){const{minX:e,maxX:n,minY:i,maxY:s}=function(t){return t.reduce(((t,e)=>({minX:Math.min(t.minX,e.x),maxX:Math.max(t.maxX,e.x),minY:Math.min(t.minY,e.y),maxY:Math.max(t.maxY,e.y)})),{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0})}(t),a=.05*(n-e),o=.05*(s-i),r=e-a,h=n+a,l=i-o,d=s+o,{min:m,max:u,tick:f}=c(r,h),{min:x,max:M,tick:p}=c(l,d);return{niceMinX:m,niceMaxX:u,niceTickX:f,niceMinY:x,niceMaxY:M,niceTickY:p}}(t);o(e,s,a,n,i),r(h,l,d,n,i)},t.drawHistogram=function(t,e){const a=Math.min(...t),o=Math.max(...t),r=n/e,c=(o-a)/e,h=new Array(e).fill(0);t.forEach((t=>{const n=Math.min(Math.floor((t-a)/c),e-1);h[n]++}));const l=function(t){const e=Math.pow(10,Math.floor(Math.log10(t))),n=t/e;let i;i=n<=1?1:n<=2?2:n<=5?5:10;return i*e}(Math.max(...h));for(let t=0;t<=5;t++){const e=i-92*t;brush.line(0,e,n,e)}brush.fill(random(s),random(60,100));for(let t=0;t<e;t++){brush.bleed(random(.01,.05)),brush.fillTexture(.55,.8);const e=h[t]/l*i;brush.rect(t*r,i-e,r-1,e)}brush.line(0,i,n,i),brush.line(0,0,0,i),textSize(12),push(),textAlign(RIGHT,CENTER);for(let t=0;t<=e;t++){const e=a+t*c;translate(t*r,480),rotate(HALF_PI),text(e.toFixed(1),0,0),rotate(-HALF_PI),translate(-t*r,-480)}pop(),textAlign(RIGHT,CENTER);for(let t=0;t<=5;t++){const e=l/5*t;text(Math.round(e),-5,i-92*t)}},t.drawXScale=o,t.drawYScale=r}));
